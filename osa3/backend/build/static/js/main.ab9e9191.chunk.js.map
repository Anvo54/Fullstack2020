{"version":3,"sources":["services/personService.js","Components/App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","NameForm","props","onSubmit","addName","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","FilterForm","filterName","handleFilter","PersonsToShow","person","del","map","key","name","number","onClick","App","useState","persons","setPersons","setNewName","setNewNumber","setFilterName","errorMessage","setErrorMessage","successMessage","setSuccessMessage","useEffect","personService","initialPersons","replaceNum","notFound","updatedPerson","find","p","changePerson","catch","error","setTimeout","Notification","className","namesToShow","filter","match","event","console","log","target","exists","forEach","preventDefault","window","confirm","returnedPerson","concat","n","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ab9e9191.chunk.js","sourcesContent":["import axios from 'axios'\r\n// For build\r\nconst baseUrl = '/api/persons'\r\n// For dev\r\n//const baseUrl = 'http://localhost:3001/api/persons'\r\n\r\nconst getAll = ()=>{\r\n\tconst request = axios.get(baseUrl)\r\n\treturn request.then(response => response.data)\r\n}\r\n\r\nconst create = (newObject)=>{\r\n\tconst request = axios.post(baseUrl, newObject)\r\n\treturn request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n\tconst request = axios.put(`${baseUrl}/${id}`, newObject)\r\n\treturn request.then(response => response.data)\r\n}\r\n\r\nconst del = (id) =>{\r\n\tconst request = axios.delete(`${baseUrl}/${id}`)\r\n\treturn request.then(response => response.data)\r\n}\r\n\r\nexport default {\r\n\tgetAll: getAll,\r\n\tcreate: create,\r\n\tupdate: update,\r\n\tdel: del\r\n}","import React, { useState, useEffect } from 'react'\r\nimport '../style.css'\r\nimport personService from '../services/personService'\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ filterName, setFilterName ] = useState('')\r\n  const [ errorMessage, setErrorMessage ] = useState('')\r\n  const [ successMessage, setSuccessMessage ] = useState('')\r\n\r\nuseEffect(()=> {\r\n  personService.getAll()\r\n  .then(initialPersons => {setPersons(initialPersons)})\r\n}, [])\r\n\r\n  const addName = (event) =>{\r\n    let exists;\r\n    persons.forEach(person => {\r\n      exists = (person.name === newName) ? person.id : 0;\r\n    });\r\n    event.preventDefault()\r\n    if (!exists) {\r\n      const newPerson = {\r\n        name: newName,\r\n        number: newNumber\r\n      }\r\n      personService.create(newPerson).then(returnedPerson => {\r\n        setPersons(persons.concat(returnedPerson))\r\n        setSuccessMessage(`Added ${newName}`)\r\n        setTimeout(() => {setSuccessMessage(null)},5000)\r\n      }).catch(error =>  {\r\n        setErrorMessage(`${error.response.data.error}`)\r\n        setTimeout(() => {setErrorMessage(null)},5000)\r\n      })\r\n    } else {\r\n      if (window.confirm(`${newName} is already added to phonebook, replace old number with a new one?`))\r\n        replaceNum(exists, newName)\r\n    }\r\n    setNewName('')\r\n    setNewNumber('')\r\n  }\r\n\r\n  const replaceNum = (id, newName) =>{\r\n    let notFound = false\r\n    const updatedPerson = persons.find(p => p.id === id)\r\n    const changePerson = {...updatedPerson, number: newNumber}\r\n    personService.update(id, changePerson).catch(error =>{\r\n      setErrorMessage(`Information of ${newName} has already been removed from server`)\r\n      setPersons(persons.map(p => p.id !== id))\r\n      setTimeout(() => {setErrorMessage(null)},5000)\r\n      notFound = true\r\n    })\r\n    if (notFound === false){\r\n      setPersons(persons.map(person => person.id !== id ? person : changePerson))\r\n      setSuccessMessage(`${updatedPerson.name} updated`)\r\n      setTimeout(() => {setSuccessMessage(null)},5000)\r\n    }\r\n  }\r\n\r\n  const handleNameChange = (event)=>{\r\n\t  console.log(event.target.value)\r\n\t  setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event)=>{\r\n    console.log(event.target.value)\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilter =(event)=>{\r\n    console.log(event.target.value)\r\n    setFilterName(event.target.value)\r\n  }\r\n\r\n  const deletePerson = (id, name) =>{\r\n    let notFound = false\r\n    if (window.confirm(`Delete ${name}?`)){\r\n      personService.del(id).catch(error => {\r\n        setErrorMessage(`${name} has already been removed!`)\r\n        setTimeout(() => {setErrorMessage(null)},5000)\r\n        notFound = true\r\n      })\r\n      setPersons(persons.filter(n => n.id !== id))\r\n      if (notFound !== false)\r\n        setErrorMessage(`information of ${name} has been removed from server`)\r\n      setTimeout(() => {setErrorMessage(null)},5000)\r\n    }\r\n  }\r\n\r\n  const Notification = ({errorMessage, successMessage})=>{\r\n    if (!errorMessage && !successMessage)\r\n      return null\r\n    if (successMessage){\r\n        return (\r\n          <div className=\"success\">\r\n            {successMessage}\r\n          </div>\r\n\r\n      )\r\n    }\r\n    if (errorMessage){\r\n        return (\r\n          <div className=\"error\">\r\n            {errorMessage}\r\n          </div>\r\n        )\r\n    }\r\n    return null\r\n  }\r\n\r\nconst namesToShow = !filterName ? persons : persons.filter(person => person.name.match(filterName))\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification errorMessage={errorMessage} successMessage={successMessage}/>\r\n        <FilterForm filterName={filterName} handleFilter={handleFilter}/>\r\n      <h2>Add new</h2>\r\n        <NameForm\r\n        addName={addName}\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n        handleNameChange={handleNameChange}\r\n        handleNumberChange={handleNumberChange}/>\r\n      <h2>Numbers</h2>\r\n        <PersonsToShow person={namesToShow} del={deletePerson}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst NameForm = (props)=>{\r\n  return(\r\n    <div>\r\n      <form onSubmit={props.addName}>\r\n        <div>\r\n          name: <input value={props.newName} onChange={props.handleNameChange}/>\r\n          <br></br>\r\n          number: <input value={props.newNumber} onChange={props.handleNumberChange}/>\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst FilterForm =(props)=>{\r\n  return(\r\n    <div>\r\n      filter shown with <input value={props.filterName} onChange={props.handleFilter}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst PersonsToShow = ({person, del}) =>{\r\n  return(\r\n    <table>\r\n      <tbody>\r\n        {person.map(person =>\r\n        <tr key={person.id}>\r\n            <td>{person.name}</td>\r\n            <td>{person.number}</td>\r\n            <td><button onClick={()=>del(person.id, person.name)}>delete</button></td>\r\n          </tr>)}\r\n      </tbody>\r\n\r\n    </table>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './Components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}