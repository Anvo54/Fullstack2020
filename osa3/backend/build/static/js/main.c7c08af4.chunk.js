(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(13),u=t.n(c),l=t(14),o=t(2),i=(t(20),t(3)),m=t.n(i),d="/api/persons",f=function(){return m.a.get(d).then((function(e){return e.data}))},s=function(e){return m.a.post(d,e).then((function(e){return e.data}))},h=function(e,n){return m.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},b=function(e){return m.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},E=function(e){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:e.addName},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.newName,onChange:e.handleNameChange}),r.a.createElement("br",null),"number: ",r.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},v=function(e){return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:e.filterName,onChange:e.handleFilter}))},p=function(e){var n=e.person,t=e.del;return r.a.createElement("table",null,r.a.createElement("tbody",null,"console.log(person)",n.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return t(e.id,e.name)}},"delete")))}))))},g=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),i=Object(o.a)(u,2),m=i[0],d=i[1],g=Object(a.useState)(""),w=Object(o.a)(g,2),N=w[0],j=w[1],O=Object(a.useState)(""),C=Object(o.a)(O,2),S=C[0],y=C[1],k=Object(a.useState)(""),M=Object(o.a)(k,2),T=M[0],A=M[1],D=Object(a.useState)(""),F=Object(o.a)(D,2),I=F[0],J=F[1];Object(a.useEffect)((function(){f().then((function(e){c(e)}))}),[]);var x=function(e,n){var a=!1,r=t.find((function(n){return n.id===e})),u=Object(l.a)({},r,{number:N});h(e,u).catch((function(r){A("Information of ".concat(n," has already been removed from server")),c(t.map((function(n){return n.id!==e}))),setTimeout((function(){A(null)}),5e3),a=!0})),!1===a&&(c(t.map((function(n){return n.id!==e?n:u}))),J("".concat(r.name," updated")),setTimeout((function(){J(null)}),5e3))},B=function(e){var n=e.errorMessage,t=e.successMessage;return n||t?t?r.a.createElement("div",{className:"success"},t):n?r.a.createElement("div",{className:"error"},n):null:null},P=S?t.filter((function(e){return e.name.match(S)})):t;return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(B,{errorMessage:T,successMessage:I}),r.a.createElement(v,{filterName:S,handleFilter:function(e){console.log(e.target.value),y(e.target.value)}}),r.a.createElement("h2",null,"Add new"),r.a.createElement(E,{addName:function(e){var n;(t.forEach((function(e){n=e.name===m?e.id:0})),e.preventDefault(),n)?window.confirm("".concat(m," is already added to phonebook, replace old number with a new one?"))&&x(n,m):s({name:m,number:N}).then((function(e){c(t.concat(e)),J("Added ".concat(m)),setTimeout((function(){J(null)}),5e3)})).catch((function(e){A(e)}));d(""),j("")},newName:m,newNumber:N,handleNameChange:function(e){console.log(e.target.value),d(e.target.value)},handleNumberChange:function(e){console.log(e.target.value),j(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(p,{person:P,del:function(e,n){var a=!1;window.confirm("Delete ".concat(n,"?"))&&(b(e).catch((function(e){A("".concat(n," has already been removed!")),setTimeout((function(){A(null)}),5e3),a=!0})),c(t.filter((function(n){return n.id!==e}))),!1!==a&&A("information of ".concat(n," has been removed from server")),setTimeout((function(){A(null)}),5e3))}}))};u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.c7c08af4.chunk.js.map